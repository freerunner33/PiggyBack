
extends pblayout

block content
	section
		form(method='POST', action='/Piggyback/export')
			p Start time
			input(type='datetime-local', name='start_time', value='2016-01-01T00:00')
			p End time
			input(type='datetime-local', name='end_time', value='2017-01-01T00:00')
			p Sort by
			select(name='sort')
				option(value='shortId') Short ID
				option(value='driverTip') Driver Tip
				option(value='taskType') Task Type
				option(value='completeAfter') Complete After
				option(value='completeBefore') Complete Before
				option(value='workerId') Worker ID
				option(value='workerName') Worker Name
				option(value='destination') Destination
				option(value='completionTime') Completion Time
				option(value='didSucceed') Did Succeed
			input(type='hidden', name='formsubmitted', value='true')
			button(type='submit') Submit
			p= test
	section
		table
			tr
				if headers
					each h in headers.split(',')
						th= h
			if arr
				each d in arr
					tr
						td #{d.shortId}
						td #{d.driverTip}
						td #{d.taskType}
						td #{d.completeAfter}
						td #{d.completeBefore}
						td #{d.workerId}
						td #{d.workerName}
						td #{d.destination}
						td #{d.completionTime}
						td #{d.didSucceed}

	script(type='text/javascript' src='https://www.gstatic.com/charts/loader.js')
	script(type='text/javascript').
		google.charts.load('current', {'packages':['table']})
		google.charts.setOnLoadCallback(drawTable)
		
		function drawTable() {
			var data = new google.visualization.DataTable()
			data.addColumn('string', 'Name')
			data.addColumn('number', 'Salary')
			data.addColumn('boolean', 'Full Time Employee')
			data.addRows([
				['Mike',  {v: 10000, f: '$10,000'}, true],
				['Jim',   {v:8000,   f: '$8,000'},  false],
				['Alice', {v: 12500, f: '$12,500'}, true],
				['Bob',   {v: 7000,  f: '$7,000'},  true],
			])
			var table = new google.visualization.Table(document.getElementById('table_div'));

			table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
		}
	//- div#table_div
